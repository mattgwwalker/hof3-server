<html>

<body>

<h2>Things to fix with PLC code:</h2>
<ul>
  <li>Add "blast" state at the end of recirc, used for cleaning.  We
  cycle through the permeate and retentate lines and just open each up
  completely one after the other.  This state will not be used during
  real production.</li>

  <li>Fix PT01 reads 0.56 bar and gives 0.5 bar signal.</li>

  <li>Auto-chem dosing with pH control</li>
 
  <li>Drain to waste function for storage tank.</li>

  <li>DONE Add storage tank pre-selection check.  Change 'production' to
  'site'.  All these messages </li>

  <li>DONE Add fault checking for drain-to-storage-tank.  Check if the
  contents are compatible.</li>

  <li>DONE How the storage tank pump works.  Why does it come on when the
  level's at target?  It should be used to fill the feed tank, and
  then if more product is required, the machine should be shut down.
  A function to fill the feedtank from the storage tank would be
  useful.</li>

  <li>FOR RPI Cleaning: The storage tank needs a cleaning algorithm.
  Including pumping back up and draining the storage tank to
  waste.</li>

  <li>Why does E-Stop change the position of DV07 and DV08?  Because
  of the way the valves are wired.  They'd need an inverted signal to
  the one we're providing.</li>

  <li>Add setpoint ramping to PC01</li>

  <li>Faults are only caught on entry.  If there's a new fault, it's
  not logged.  Check to see if the fault message changes.</li>

  <li>NO. Add backwash count to log</li>

  <li>DONE calm down the coefficients for the pump</li>

  <li>DONE Add ratio and max backflush pressure to logging</li>

  <li>TO TEST Add logging at intervals</li>

  <li>DONE Add the ability to turn off backwash logging.</li>

  <li>DONE The PID controller for PC03 jumps out of manual setpoint all on
  its own.  Fix this.</li>

  <li>DONE Add drain-to-tank command</li>
 
  <li>DONE Move draining to a separate command.  Leave emptying to site as
  a part of production, but add the ability to skip it (-1 in empty
  level, for example).</li>
 
  <li>DONE Add PID controllers for heating and cooling (user chooses).</li>

  <li>DONE Add fault checking for pressures, pH, and temps.</li>

  <li>DONE If dosing is longer than mixing+recirc, then dosing is cut
  short.</li>

  <li>IGNORED Change dosing to be measured as a chemical concentration
  (percentage of tank).  Dosing pump gives an average 3.82mL/s at 90%
  on pump's dial.</li>

  <li>DONE During Mixing, DV03 is currently in the wrong direction.  The
  problem is that liquid can pass through the membrane and out the
  permeate line.  The solution is to close off DV03 during Mixing.  It
  seems that the position of DV02 might also need to be considered in
  the same way.  It seems that this depends on the last direction
  change.</li>

  <li>IGNORED The pause command does not pause the filling of product.</li>

  <li>IGNORED The direction change timers do not reset to zero.  Should they?
  Is it better that we do not and rather keep a consistent duration
  between direction changes?</li>

  <li>FIXED There is currently no provision for the user to fill the tank on
  their own.  What would happen if we set fillSource to none and
  started production?</li>

  <li>IGNORED When a fault occurs, the PIDs might be frozen, but the timers
  don't seem to be.  It moved states while faulting after ~30
  seconds.</li>

  <li>ME When the process is aborted, the concentration ratio reverts to
  one.  This isn't necessary.  Fix it.</li>

  <li>ME Add backflush-return states so that piston can return to normal
  position while PID controllers are still frozen.</li>

  <li>ME Add storage tank status.  When filling from storage tank use
  this value as the new plant status.</li>

</ul>


</body>

</html>
